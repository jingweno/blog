---
layout: post
title: Running Eclipse Java Compiler with Ant
tags: eclipse
---

<a rel="nofollow" href="http://www.eclipse.org/jdt/core/index.php" target="_blank">Eclipse Java Compiler</a> (EJC) is an <a href="http://en.wikipedia.org/wiki/Incremental_compiler" target="_blank">incremental compiler</a> that is generally faster than any JDKs. It also fixes some incompatible problems related to JDK6, e.g. <a href="http://issues.apache.org/jira/browse/OPENJPA-640" target="_blank">http://issues.apache.org/jira/browse/OPENJPA-640</a>. This post is about how to run EJC with an ant target to compile your Java projects.
<ol>
	<li>Install <a href="http://ant.apache.org/" target="_blank">Ant</a> 1.7+.</li>
	<li>Download the latest <a rel="nofollow" href="http://download.eclipse.org/eclipse/downloads/drops/R-3.5-200906111540/index.php#JDTCORE" target="_blank">JDT Core Batch Compiler</a> and put it directly into your $ANT_HOME/lib folder. Or, if you have Eclipse installed, you have the compiler by default! Locate the *org.eclipse.jdt.core_xxx.jar* in the plugins directory of your Eclipse installation, put that jar file into the $ANT_HOME/lib folder, and at the same time unzip this jar file and make *jdtCompilerAdapter.jar* available to ant.</li>
	<li>You are now ready to test the Eclipse compiler in command line. The key is to direct ant to use EJC by specifying the compiler parameter *-Dbuild.compiler* to *org.eclipse.jdt.core.JDTCompilerAdapter*. Go to a Java project and type in:
<p/>
[gist]<script src="http://gist.github.com/499762.js?file=ant.sh"></script>[/gist]
</li>
	<li>You can also set up an ant target to play around with it:
<p/>
[gist]<script src="http://gist.github.com/499762.js?file=build.xml"></script>[/gist]
</li>
</ol>